<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Report New Crime</title>

  <style>
    :root{
      --bg:#eef3f6;
      --panel:#ffffff;
      --muted:#6b7280;
      --accent:#0b84ff;
      --accent-2:#1e6fff;
      --shadow:0 8px 28px rgba(12,24,40,0.08);
      --radius:14px;
      --input:#f7f9fb;
      --text:#08202a;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background:linear-gradient(180deg,#dce7f3,#eef3f6);
      color:var(--text);
    }

    .wrap{max-width:900px;margin:40px auto;padding:0 20px}

    .header{text-align:center;margin-bottom:28px}
    .header h1{margin:0;font-size:32px;font-weight:800}
    .header p{margin:6px 0 0;color:var(--muted)}

    .card{
      background:var(--panel);
      padding:28px;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
    }

    .card h3{margin:0 0 18px;font-size:20px;font-weight:700}

    label{
      display:block;
      font-weight:600;
      margin:14px 0 6px;
    }

    input, textarea{
      width:100%;
      padding:12px;
      border-radius:10px;
      border:1px solid #d8e0e8;
      background:var(--input);
      font-size:15px;
    }

    textarea{min-height:110px;resize:vertical}
    .row{display:flex;gap:18px}
    .col{flex:1}

    .btn{
      margin-top:20px;
      padding:12px 18px;
      font-weight:700;
      border-radius:12px;
      border:0;
      cursor:pointer;
      background: var(--accent);
      color:white;
      font-size:16px;
      box-shadow:0 8px 18px rgba(15,94,255,0.18);
      transition:0.2s ease;
    }
    .btn:hover{background:var(--accent-2)}

    /* GPS button */
    .gps-btn{
      margin-top:8px;
      padding:8px 12px;
      border-radius:10px;
      background:#e8f2ff;
      border:1px solid #b9d6ff;
      color:#0b57d0;
      cursor:pointer;
      font-weight:600;
      font-size:14px;
      width:max-content;
    }
    .gps-btn:hover{background:#dce9ff}

    .preview{
      margin-top:10px;
      width:100%;
      max-height:240px;
      object-fit:cover;
      border-radius:12px;
      display:none;
      box-shadow:0 6px 20px rgba(0,0,0,0.06);
    }

    @media(max-width:700px){
      .row{flex-direction:column}
    }
  </style>

</head>
<body>

<div class="wrap">

  <div class="header">
    <h1>Report a Crime</h1>
    <p>Provide details and help keep your community safe.</p>
  </div>

  <div class="card">
    <h3>Incident Details</h3>

    <form method="POST" enctype="multipart/form-data">

      <label>Title</label>
      <input type="text" name="title" required placeholder="Ex: Theft, Assault, Robbery">

      <label>Description</label>
      <textarea name="description" required placeholder="Describe the incident in detail..."></textarea>

      <div class="row">
        <div class="col">
          <label>Date of Incident</label>
          <input type="date" name="incident_date" required>
        </div>

        <div class="col">
          <label>Location Name</label>
          <input type="text" name="location_name" placeholder="Koramangala, MG Road, etc.">
        </div>
      </div>

      <h3 style="margin-top:30px">Location</h3>

      <button type="button" class="gps-btn" onclick="getLocation()">
        üìç Use My Current Location
      </button>

      <div class="row">
        <div class="col">
          <label>Latitude</label>
          <input type="text" name="lat" id="lat" placeholder="Auto-filled if GPS allowed">
        </div>

        <div class="col">
          <label>Longitude</label>
          <input type="text" name="lon" id="lon" placeholder="Auto-filled if GPS allowed">
        </div>
      </div>

      <h3 style="margin-top:28px">Upload Evidence</h3>

      <label>Photo</label>
      <input type="file" name="image" accept="image/*" onchange="previewImage(event)">
      <img id="imgPreview" class="preview" alt="Preview">

      <button class="btn" type="submit">Submit Report</button>

    </form>
  </div>

</div>

<!-- JS FOR GPS + IMAGE PREVIEW -->
<script>
  // Image preview
  function previewImage(e){
    const file = e.target.files[0];
    if(!file) return;
    const img = document.getElementById("imgPreview");
    img.src = URL.createObjectURL(file);
    img.style.display = "block";
  }

  // Auto GPS
  function getLocation(){
    if(!navigator.geolocation){
      alert("Geolocation not supported.");
      return;
    }

    navigator.geolocation.getCurrentPosition(
      pos => {
        document.getElementById("lat").value = pos.coords.latitude.toFixed(6);
        document.getElementById("lon").value = pos.coords.longitude.toFixed(6);
      },
      err => {
        alert("Unable to get location. Please allow GPS access.");
      }
    );
  }
</script>


</body>
</html>
